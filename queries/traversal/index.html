<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us">
<head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="generator" content="Hugo 0.42.1" />

  
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  
  <title>Traversal &middot; BMEG</title>
  

  
  <link rel="stylesheet" href="https://bmeg.github.io/css/poole.css">
  <link rel="stylesheet" href="https://bmeg.github.io/css/darcula.css">
  <link rel="stylesheet" href="https://bmeg.github.io/css/syntax.css">
  <link rel="stylesheet" href="https://bmeg.github.io/css/theme.css">
  <link rel="stylesheet" href="https://bmeg.github.io/css/funnel.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400italic,700">

  
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://bmeg.github.io/apple-touch-icon-144-precomposed.png">
  <link rel="shortcut icon" href="https://bmeg.github.io/favicon.png">

  <script src="https://bmeg.github.io/js/highlight.pack.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>

</head>
<body>

  <div class="global-header">
    <div class="global-header-container">
      <div class="global-header-home">
        <a href="http://bmeg.io"><h1>BMEG</h1></a>
      </div>
      <ul class="global-header-nav">
          <li><a href="https://bmeg.github.io/queries/">Make Queries</a></li>
          <li><a href="https://bmeg.github.io/building/">Build Graph</a></li>
          <li><a target="_blank" href="https://github.com/bmeg/">GitHub</a></li>
          <li><a target="_blank" href="https://gitter.im/bmeg/">Chat</a></li>
        </ul>
      <div class="global-header-ohsucb">
        <a href="https://www.ohsu.edu/compbio/"><h2>OHSU Comp Bio</h2></a>
      </div>
    </div>
  </div>


<div class="content section group">

  <div class="sidebar col span_3_of_12">
    <ul class="sidebar-nav">
      
      
        
        <li>
          
          <span class="intermediate"><a href="https://bmeg.github.io/queries/"
             class="sidebar-nav-item "
          >Queries</a></span></li>
          
          <li>
            <ul class="sidebar-nav sidebar-nav-nested">
              <li>
                <a href="https://bmeg.github.io/queries/install/"
                   class="sidebar-nav-item "
                >Install</a></li>
            </ul>
          </li>
          
          <li>
            <ul class="sidebar-nav sidebar-nav-nested">
              <li>
                <a href="https://bmeg.github.io/queries/getting_started/"
                   class="sidebar-nav-item "
                >Getting Started</a></li>
            </ul>
          </li>
          
          <li>
            <ul class="sidebar-nav sidebar-nav-nested">
              <li>
                <a href="https://bmeg.github.io/queries/traversal/"
                   class="sidebar-nav-item  active"
                >Traversal</a></li>
            </ul>
          </li>
          
          <li>
            <ul class="sidebar-nav sidebar-nav-nested">
              <li>
                <a href="https://bmeg.github.io/queries/kaplan_meier/"
                   class="sidebar-nav-item "
                >Kaplan Meier Curves</a></li>
            </ul>
          </li>
          
          <li>
            <ul class="sidebar-nav sidebar-nav-nested">
              <li>
                <a href="https://bmeg.github.io/queries/matrix/"
                   class="sidebar-nav-item "
                >Matrix</a></li>
            </ul>
          </li>
          
          <li>
            <ul class="sidebar-nav sidebar-nav-nested">
              <li>
                <a href="https://bmeg.github.io/queries/drug_response/"
                   class="sidebar-nav-item "
                >Drug Response</a></li>
            </ul>
          </li>
          
          
        
        <li>
          
          <span class="intermediate"><a href="https://bmeg.github.io/building/"
             class="sidebar-nav-item "
          >Building Graph</a></span></li>
          
          <li>
            <ul class="sidebar-nav sidebar-nav-nested">
              <li>
                <a href="https://bmeg.github.io/building/schema/"
                   class="sidebar-nav-item "
                >Schema</a></li>
            </ul>
          </li>
          
          <li>
            <ul class="sidebar-nav sidebar-nav-nested">
              <li>
                <a href="https://bmeg.github.io/building/import/"
                   class="sidebar-nav-item "
                >Data Import</a></li>
            </ul>
          </li>
          
          <li>
            <ul class="sidebar-nav sidebar-nav-nested">
              <li>
                <a href="https://bmeg.github.io/building/protograph/"
                   class="sidebar-nav-item "
                >Protograph</a></li>
            </ul>
          </li>
          
          
        
        <li>
          
          <a href="https://bmeg.github.io/system/"
             class="sidebar-nav-item "
          >System</a></li>
          
        
        <li>
          
          <a href="https://bmeg.github.io/updates/"
             class="sidebar-nav-item "
          >Updates</a></li>
          
        
      
    </ul>
  </div>

  <div class="main col span_8_of_12">
    

<h1 id="starting-traversal">Starting Traversal</h1>

<h2 id="v-ids">.V([ids])</h2>

<p>Start query from Vertex</p>

<pre><code class="language-python">O.query().V()
</code></pre>

<p>Returns all vertices in graph</p>

<pre><code class="language-python">O.query().V(&quot;vertex1&quot;)
</code></pre>

<p>Returns:</p>

<pre><code class="language-json">{&quot;gid&quot; : &quot;vertex1&quot;, &quot;label&quot;:&quot;TestVertex&quot;, &quot;data&quot;:{}}
</code></pre>

<h2 id="e">.E()</h2>

<p>Start query from Edge</p>

<pre><code class="language-python">O.query().E()
</code></pre>

<p>Returns all edges in graph</p>

<h1 id="filtering">Filtering</h1>

<h2 id="where">.where()</h2>

<p>Filter elements using conditional statements</p>

<pre><code class="language-python">O.query().V().where(aql.eq(&quot;_label&quot;, &quot;Gene&quot;)).where(aql.eq(&quot;symbol&quot;, &quot;TP53&quot;))
</code></pre>

<h2 id="conditions">Conditions</h2>

<p>Conditions are arguments to <code>.where()</code> that define selection conditions</p>

<h3 id="aql-eq-variable-value">aql.eq(variable, value)</h3>

<p>Returns rows where variable == value</p>

<pre><code class="language-python">.where(aql.eq(&quot;symbol&quot;, &quot;TP53&quot;))
</code></pre>

<h3 id="aql-neq-variable-value">aql.neq(variable, value)</h3>

<p>Returns rows where variable != value</p>

<pre><code class="language-python">.where(aql.neq(&quot;symbol&quot;, &quot;TP53&quot;))
</code></pre>

<h3 id="aql-gt-variable-value">aql.gt(variable, value)</h3>

<p>Returns rows where variable &gt; value</p>

<pre><code class="language-python">.where(aql.gt(&quot;age&quot;, 45))
</code></pre>

<h3 id="aql-lt-variable-value">aql.lt(variable, value)</h3>

<p>Returns rows where variable &lt; value</p>

<pre><code class="language-python">.where(aql.lt(&quot;age&quot;, 45))
</code></pre>

<h3 id="aql-gte-variable-value">aql.gte(variable, value)</h3>

<p>Returns rows where variable &gt;= value</p>

<pre><code class="language-python">.where(aql.gte(&quot;age&quot;, 45))
</code></pre>

<h3 id="aql-lte-variable-value">aql.lte(variable, value)</h3>

<p>Returns rows where variable &lt;= value</p>

<pre><code class="language-python">.where(aql.lte(&quot;age&quot;, 45))
</code></pre>

<h3 id="aql-in-variable-value">aql.in_(variable, value)</h3>

<p>Returns rows where variable in value</p>

<pre><code class="language-python">.where(aql.in_(&quot;symbol&quot;, [&quot;TP53&quot;, &quot;BRCA1&quot;]))
</code></pre>

<h3 id="aql-contains-variable-value">aql.contains(variable, value)</h3>

<p>Returns rows where variable contains value</p>

<pre><code class="language-python">.where(aql.in_(&quot;groups&quot;, &quot;group1&quot;))
</code></pre>

<p>Returns:</p>

<pre><code>{&quot;data&quot; : {&quot;groups&quot; : [&quot;group1&quot;, &quot;group2&quot;]}}
</code></pre>

<h3 id="aql-and-conditions">aql.and_([conditions])</h3>

<pre><code class="language-python">.where(aql.and_( [aql.lte(&quot;age&quot;, 45), aql.gte(&quot;age&quot;, 35)] ))
</code></pre>

<h3 id="aql-or-conditions">aql.or_([conditions])</h3>

<pre><code class="language-python">.where(aql.or_( [...] ))
</code></pre>

<h3 id="aql-not-condition">aql.not_(condition)</h3>

<h1 id="output">Output</h1>

<h2 id="mark-name">.mark(name)</h2>

<p>Store current row for future reference</p>

<pre><code class="language-python">O.query().V().mark(&quot;a&quot;).out().mark(&quot;b&quot;)
</code></pre>

<h2 id="select-names">.select([names])</h2>

<p>Output previously marked elements</p>

<h2 id="limit-count">.limit(count)</h2>

<p>Limit number of total output rows</p>

<h2 id="offset-count">.offset(count)</h2>

<p>Start return after offset</p>

<h2 id="render-template">.render(template)</h2>

<p>Render current selection into arbitrary data structure</p>

<h1 id="traversing-the-graph">Traversing the graph</h1>

<h2 id="in">.in_()</h2>

<p>Following incoming edges. Optional argument is the edge label (or list of labels) that should be followed. If no argument is provided, all incoming edges.</p>

<h2 id="out">.out()</h2>

<p>Following outgoing edges. Optional argument is the edge label (or list of labels) that should be followed. If no argument is provided, all outgoing edges.</p>

<h2 id="both">.both()</h2>

<p>Following all edges (both in and out). Optional argument is the edge label (or list of labels) that should be followed.</p>

<h2 id="inedge">.inEdge()</h2>

<p>Following incoming edges, but return the edge as the next element. This can be used to inspect edge properties. Optional argument is the edge label (or list of labels) that should be followed. To return back to a vertex, use <code>.in_</code> or <code>.out</code></p>

<h2 id="outedge">.outEdge()</h2>

<p>Following outgoing edges, but return the edge as the next element. This can be used to inspect edge properties. Optional argument is the edge label (or list of labels) that should be followed. To return back to a vertex, use <code>.in_</code> or <code>.out</code></p>

<h2 id="bothedge">.bothEdge()</h2>

<p>Following all edges, but return the edge as the next element. This can be used to inspect edge properties. Optional argument is the edge label (or list of labels) that should be followed. To return back to a vertex, use <code>.in_</code> or <code>.out</code></p>

<h1 id="aggregation">Aggregation</h1>

<h2 id="aggregate">.aggregate()</h2>

<p>Return aggregate counts of field. This can be run at the graph level, without using the <code>.query()</code> method to start a traversal, ie</p>

<pre><code>O.aggregate(aql.term(&quot;test-agg&quot;, &quot;Person&quot;, &quot;name&quot;))
</code></pre>

<p>Where <code>test-agg</code> is the name of the aggrigation, <code>Person</code> is the vertex label type and <code>name</code> is the field.</p>

<pre><code>O.query().V(&quot;1&quot;).out().aggregate(aql.histogram(&quot;traversal-agg&quot;, &quot;Person&quot;, &quot;age&quot;, 5))
</code></pre>

<p>Starts on vertex <code>1</code>, goes out and then creates a histogram named <code>traversal-agg</code> across the <code>age</code> field in the <code>Person</code> vertices.</p>

<h2 id="count">.count()</h2>

<p>Return the total count of elements</p>

<h2 id="distinct">.distinct()</h2>

<p>Only return distinct elements. Argument can JSON path to define what elements are used to identify uniqueness.</p>

  </div>

</div>
</body>
</html>
